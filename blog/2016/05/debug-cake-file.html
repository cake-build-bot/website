<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
        <meta name="description" />
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <title>Cake - How to debug a Cake file</title>
        <link href="/assets/css/mermaid.css" rel="stylesheet">
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/bootstrap/bootstrap.css" rel="stylesheet" />
        <link href="/assets/css/adminlte/AdminLTE.css" rel="stylesheet" />
        <link href="/assets/css/theme/theme.css" rel="stylesheet" />
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/assets/css/override.css" rel="stylesheet" />
        <script src="/assets/js/jQuery-2.2.3.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>        
        <script src="/assets/js/app.min.js"></script>         
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/assets/js/mermaid.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/assets/js/html5shiv.min.js"></script>
        <script src="/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/" class="logo">
                    <!-- mini logo for sidebar mini 50x50 pixels -->
                    <span class="logo-mini"><img src="/assets/img/logo.png"></span>
                    <!-- logo for regular state and mobile devices -->
                    <span class="logo-lg"><img src="/assets/img/logo.png"></span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/blog">Blog</a></li>
        <li><a href="/docs">Documentation</a></li>
        <li><a href="/dsl">Reference</a></li>
        <li><a href="/addins">Addins</a></li>
        <li><a href="/api">API</a></li>
        <li><a href="https://github.com/cake-build/cake"><i class="fa fa-github"></i> Source</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
        <div><p><a href="https://github.com/cake-build/website/blob/develop/src/input/blog/2016-05-26-debug-cake-file.md"><i class="fa fa-pencil-square" aria-hidden="true"></i> Edit Content</a></p></div>
    <div id="infobar-headings"></div>

                </section>
                <section class="sidebar">                    
                    

                    <ul class="sidebar-menu">
                        

    <li class="header"><i class="fa fa-bookmark"></i> Categories</li>    
        <li><a href="/blog/addins">Addins</a></li>
        <li><a href="/blog/announcement">Announcement</a></li>
        <li><a href="/blog/how-tos">How To&#x27;s</a></li>
        <li><a href="/blog/infrastructure">Infrastructure</a></li>
        <li><a href="/blog/news">News</a></li>
        <li><a href="/blog/release-notes">Release Notes</a></li>
    
    <li class="header"><i class="fa fa-calendar"></i> Archive</li>    
        <li><a href="/blog/archive/2017/01">January, 2017</a></li>
        <li><a href="/blog/archive/2016/12">December, 2016</a></li>
        <li><a href="/blog/archive/2016/11">November, 2016</a></li>
        <li><a href="/blog/archive/2016/10">October, 2016</a></li>
        <li><a href="/blog/archive/2016/09">September, 2016</a></li>
        <li><a href="/blog/archive/2016/08">August, 2016</a></li>
        <li><a href="/blog/archive/2016/07">July, 2016</a></li>
        <li><a href="/blog/archive/2016/06">June, 2016</a></li>
        <li><a href="/blog/archive/2016/05">May, 2016</a></li>
        <li><a href="/blog/archive/2016/04">April, 2016</a></li>
        <li><a href="/blog/archive/2016/03">March, 2016</a></li>
        <li><a href="/blog/archive/2016/02">February, 2016</a></li>
        <li><a href="/blog/archive/2016/01">January, 2016</a></li>
        <li><a href="/blog/archive/2015/12">December, 2015</a></li>
        <li><a href="/blog/archive/2015/11">November, 2015</a></li>
        <li><a href="/blog/archive/2015/10">October, 2015</a></li>
        <li><a href="/blog/archive/2015/09">September, 2015</a></li>
        <li><a href="/blog/archive/2015/08">August, 2015</a></li>
        <li><a href="/blog/archive/2015/07">July, 2015</a></li>
    
    <li class="header"><i class="fa fa-user"></i> Authors</li>    
        <li><a href="/blog/author/agc93">agc93</a></li>
        <li><a href="/blog/author/daveaglick">daveaglick</a></li>
        <li><a href="/blog/author/devlead">devlead</a></li>
        <li><a href="/blog/author/gep13">gep13</a></li>
        <li><a href="/blog/author/jericho">jericho</a></li>
        <li><a href="/blog/author/mholo65">mholo65</a></li>
        <li><a href="/blog/author/patriksvensson">patriksvensson</a></li>

                    </ul>
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



	<section class="content-header">
		<h1>How to debug a Cake file</h1>
	</section>
	<section class="content">
		


<dl class="dl-horizontal">
    <dt><i class="fa fa-calendar"></i> Published</dt>
    <dd>Thursday, May 26, 2016</dd>
        <dt><i class="fa fa-bookmark"></i> Category</dt>
        <dd><a href="/blog/how-tos">How To&#x27;s</a></dd>
            <dt><i class="fa fa-user"></i> Author</dt>
        <dd><a href="/blog/author/gep13">gep13</a></dd>
</dl>

<p>As you might have noticed, as part of the v0.12.0 release of Cake, thanks to a <a href="https://github.com/cake-build/cake/pull/858">community contribution</a> from <a href="https://github.com/mholo65">mholo65</a>, Cake now has debug support for Cake files.</p>
<h3 id="what-does-this-mean">What does this mean?</h3>
<p>This means that while creating/modifying your Cake build script, you can use Visual Studio to step into the Cake file and get full debug support, in the same way as if you were writing something like a Windows Forms Application.  This includes things like:</p>
<ul>
<li>Breakpoints</li>
<li>Watches</li>
<li>Immediate Window</li>
<li>etc.</li>
</ul>
<h3 id="how-does-this-work">How does this work?</h3>
<p>In order to enable debugging of a Cake file, follow these steps:</p>
<ol>
<li>Launch cake.exe with <code>-debug</code> flag</li>
<li>Process will stop prior to executing script and report <code>Attach debugger to process xxx to continue</code>
<br/><img src="/assets/img/debugging-cake-file/pass_debug_flag.png" class="img-fluid" alt="Pass Debug Flag" /></li>
<li>Open Visual Studio, open the cake file, add a breakpoint</li>
<li>Open Debug &gt; Attach to Process...
<br/><img src="/assets/img/debugging-cake-file/attach_to_process.png" class="img-fluid" alt="Attach To Process" /></li>
<li>Attach to process with PID reported in step 2.
<br/><img src="/assets/img/debugging-cake-file/find_process_id.png" class="img-fluid" alt="Find Process Id" /></li>
<li>The execution of the Cake script will then continue, and your breakpoints will be hit
<br/><img src="/assets/img/debugging-cake-file/hit_breakpoint.png" class="img-fluid" alt="Hit Breakpoint" /></li>
</ol>
<h3 id="alternative-approach">Alternative Approach</h3>
<p>Another way to enable debugging of a Cake script is to directly debug the Cake Source Code, passing in the location of the Cake file that you would like to debug.  This can be done using the following steps:</p>
<ol>
<li>Clone the Cake project from GitHub</li>
<li>Open the Cake solution file <code>src/Cake.sln</code></li>
<li>Modify the project properties to specify the build.cake file that you would like to debug
<br/><img src="/assets/img/debugging-cake-file/project_properties.png" class="img-fluid" alt="Hit Breakpoint" /></li>
<li>Start debugging by pushing F5, or clicking the green play button</li>
</ol>
<h3 id="break-preprocessor-directive">break preprocessor directive</h3>
<p>In addition to directly setting breakpoints, it is also possible to place a <code>#break</code> pre-processor directive at the location where you want the debugger to break in your script.  At runtime, this <code>#break</code> directive will be replaced by <code>System.Diagnostics.Debugger.Break();</code> which will cause the debugger to stop at that location.</p>
<p><img src="/assets/img/debugging-cake-file/using_break_directive.png" class="img-fluid" alt="Using Break Directive" /></p>
<p><strong>NOTE:</strong> If the debugger is not currently attached, then the <code>#break</code> directive is simply ignored.</p>
<h3 id="gotchas">Gotchas!</h3>
<ol>
<li>In order to allow debugging of Cake Scripts, Visual Studio might need to run in elevated mode.  If you attempt to debug a Cake script and elevation is required, you will see the following message appear.
<br/><img src="/assets/img/debugging-cake-file/elevated_permissions.png" class="img-fluid" alt="Elevated Permissions" /></li>
<li>Sometimes VS will fail and report &quot;Source not found&quot;, if this is the case, close the open Cake file and then from the call stack window right click on the first row and select &quot;Go to source&quot;. This should open the source file and everything is fine.
<br/><img src="/assets/img/debugging-cake-file/source_not_found.png" class="img-fluid" alt="Source Not Found" /></li>
<li>Sometimes VS will display an &quot;opened by another project&quot; message box.  Simply click OK
<br/><img src="/assets/img/debugging-cake-file/opened_by_another_project.png" class="img-fluid" alt="Source Not Found" /></li>
</ol>
<h3 id="known-issues">Known Issues</h3>
<ol>
<li>Debugging is currently not supported when using mono</li>
</ol>


	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <p class="text-muted">
    <a href="https://github.com/cake-build/cake"><i class="fa fa-github"></i> GitHub</a> |
    <a href="https://twitter.com/cakebuildnet"><i class="fa fa-twitter"></i> Twitter</a> |
    <a href="https://gitter.im/cake-build/cake"><i class="fa fa-comment"></i> Gitter</a>
    <br/>
    Copyright &copy; <a href="http://dotnetfoundation.org">.NET Foundation</a> and contributors.
    <br/>
    Generated by <a href="http://wyam.io">Wyam</a>
</p>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        <!-- Gitter -->
<script>
    ((window.gitter = {}).chat = {}).options = {
        room: 'cake-build/cake'
    };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).load(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        htmlLabels: false,
                        useMaxWidth:false
                    }
                });  
                mermaid.init(undefined, ".mermaid")
                $('svg').addClass('img-responsive');
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });
            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    </body>
</html>